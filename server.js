const express = require('express')
const path = require('path')
const db = require('./models')
const app = express()
const roleRoutes = require('./routes/role-routes')
const userRoutes = require('./routes/user-routes')
const refereeRoutes = require('./routes/referee-routes')
const courtRoutes = require('./routes/court-routes')
const workoutAndTestRoutes = require('./routes/workoutAndTest-routes')
const testResultRoutes = require('./routes/testResult-routes')
const teamRoutes = require('./routes/team-routes')
const degreeRoutes = require('./routes/Degree-routes')
const matchRoutes = require('./routes/match-routes')
const matchTeamsRoutes = require('./routes/matchTeams-routes')

app.use(express.urlencoded({extended:true}))
app.use(express.json())

// serve uploaded files (e.g., images) from /uploads
app.use('/uploads', express.static(path.join(__dirname, 'uploads')))

app.use('/api/role',roleRoutes)
app.use('/api/user',userRoutes)
app.use('/api/referee',refereeRoutes)
app.use('/api/court',courtRoutes)
app.use('/api/workoutAndTest',workoutAndTestRoutes)
app.use('/api/testResult',testResultRoutes)
app.use('/api/team',teamRoutes)
app.use('/api/degree',degreeRoutes)
app.use('/api/match',matchRoutes)
app.use('/api/matchTeams',matchTeamsRoutes)

db.sequelize.sync({alter:true}).then(()=>{
    app.listen(3000,()=>console.log('server listening in port 3000'))
})